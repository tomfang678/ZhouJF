<?xml version="1.0" encoding="utf-8"?>
<!--  XML 文件生成时间 2017-10-04 10:06  -->
<!--  如果生成的是明细需要用  GetByForeingKey 替换 SelectObject 同时修改对应主表中DeleteObject 语句 -->
<Entity>
  <PrimaryKeyName>ID</PrimaryKeyName>
  <MappingTableName>BridgeInfo</MappingTableName>
  <Sqls>
    <Sql Name="SelectObject">
      <SqlString>
        <String>
          <![CDATA[
              SELECT 
 ID 
 ,RoadID 
 ,BridgeName 
 ,BridgeStructureStyle 
 ,InteractionAngle 
 ,BridgeSpanCount 
 ,BridgeSpanStyle 
 ,BridgeSquare 
 ,BridgeLength 
 ,BridgeWidth 
 ,DriveWayWidth 
 ,PavementWidth 
 ,MainBeamSize 
 ,MainBeamCount 
 ,BearingStyle 
 ,BridgeRoadStructure 
 ,ExpansionStyle 
 ,ExpansionCount 
 ,MainBridgeLongitudinalSlope 
 ,MainBridgeCrossSlope 
 ,RailLength 
 ,RailStructure 
 ,BankRevetmentStyle 
 ,CappingSize 
 ,PileFeature 
 ,WaterSupplyPipeCount 
 ,GasPipeCount 
 ,ElectricPowerCount 
 ,CommsCableCount 
 ,Images 
 ,LeaderCode 
 ,CreateUser 
 ,CreateTime 
 ,LastModifiedUser 
 ,LastModifiedTime 
  
 FROM 
 BridgeInfo 
  WHERE @Where ;
]]>
        </String>
        <Param Name = "@Where" Column = "Where" TypeName = "System.String" />
      </SqlString>
    </Sql>
    <Sql Name="AddObject">
      <SqlString>
        <String>
          <![CDATA[
              INSERT INTO 
 BridgeInfo 
 (RoadID 
 ,BridgeName 
 ,BridgeStructureStyle 
 ,InteractionAngle 
 ,BridgeSpanCount 
 ,BridgeSpanStyle 
 ,BridgeSquare 
 ,BridgeLength 
 ,BridgeWidth 
 ,DriveWayWidth 
 ,PavementWidth 
 ,MainBeamSize 
 ,MainBeamCount 
 ,BearingStyle 
 ,BridgeRoadStructure 
 ,ExpansionStyle 
 ,ExpansionCount 
 ,MainBridgeLongitudinalSlope 
 ,MainBridgeCrossSlope 
 ,RailLength 
 ,RailStructure 
 ,BankRevetmentStyle 
 ,CappingSize 
 ,PileFeature 
 ,WaterSupplyPipeCount 
 ,GasPipeCount 
 ,ElectricPowerCount 
 ,CommsCableCount 
 ,Images 
 ,LeaderCode 
 ,CreateUser 
 ,CreateTime 
 ,LastModifiedUser 
 ,LastModifiedTime 
 ) 
 VALUES( 
@RoadID 
 ,@BridgeName 
 ,@BridgeStructureStyle 
 ,@InteractionAngle 
 ,@BridgeSpanCount 
 ,@BridgeSpanStyle 
 ,@BridgeSquare 
 ,@BridgeLength 
 ,@BridgeWidth 
 ,@DriveWayWidth 
 ,@PavementWidth 
 ,@MainBeamSize 
 ,@MainBeamCount 
 ,@BearingStyle 
 ,@BridgeRoadStructure 
 ,@ExpansionStyle 
 ,@ExpansionCount 
 ,@MainBridgeLongitudinalSlope 
 ,@MainBridgeCrossSlope 
 ,@RailLength 
 ,@RailStructure 
 ,@BankRevetmentStyle 
 ,@CappingSize 
 ,@PileFeature 
 ,@WaterSupplyPipeCount 
 ,@GasPipeCount 
 ,@ElectricPowerCount 
 ,@CommsCableCount 
 ,@Images 
 ,@LeaderCode 
 ,@CreateUser 
 ,@CreateTime 
 ,@LastModifiedUser 
 ,@LastModifiedTime 
 );
]]>
        </String>
        <Param Name = "@ID" Column = "ID" TypeName = "System.Int32" />
        <Param Name = "@RoadID" Column = "RoadID" TypeName = "System.Int32" />
        <Param Name = "@BridgeName" Column = "BridgeName" TypeName = "System.String" />
        <Param Name = "@BridgeStructureStyle" Column = "BridgeStructureStyle" TypeName = "System.String" />
        <Param Name = "@InteractionAngle" Column = "InteractionAngle" TypeName = "System.String" />
        <Param Name = "@BridgeSpanCount" Column = "BridgeSpanCount" TypeName = "System.String" />
        <Param Name = "@BridgeSpanStyle" Column = "BridgeSpanStyle" TypeName = "System.String" />
        <Param Name = "@BridgeSquare" Column = "BridgeSquare" TypeName = "System.Int32" />
        <Param Name = "@BridgeLength" Column = "BridgeLength" TypeName = "System.Int32" />
        <Param Name = "@BridgeWidth" Column = "BridgeWidth" TypeName = "System.Int32" />
        <Param Name = "@DriveWayWidth" Column = "DriveWayWidth" TypeName = "System.Int32" />
        <Param Name = "@PavementWidth" Column = "PavementWidth" TypeName = "System.Int32" />
        <Param Name = "@MainBeamSize" Column = "MainBeamSize" TypeName = "System.Int32" />
        <Param Name = "@MainBeamCount" Column = "MainBeamCount" TypeName = "System.Int32" />
        <Param Name = "@BearingStyle" Column = "BearingStyle" TypeName = "System.String" />
        <Param Name = "@BridgeRoadStructure" Column = "BridgeRoadStructure" TypeName = "System.String" />
        <Param Name = "@ExpansionStyle" Column = "ExpansionStyle" TypeName = "System.String" />
        <Param Name = "@ExpansionCount" Column = "ExpansionCount" TypeName = "System.Int32" />
        <Param Name = "@MainBridgeLongitudinalSlope" Column = "MainBridgeLongitudinalSlope" TypeName = "System.Double" />
        <Param Name = "@MainBridgeCrossSlope" Column = "MainBridgeCrossSlope" TypeName = "System.Double" />
        <Param Name = "@RailLength" Column = "RailLength" TypeName = "System.Int32" />
        <Param Name = "@RailStructure" Column = "RailStructure" TypeName = "System.String" />
        <Param Name = "@BankRevetmentStyle" Column = "BankRevetmentStyle" TypeName = "System.String" />
        <Param Name = "@CappingSize" Column = "CappingSize" TypeName = "System.Int32" />
        <Param Name = "@PileFeature" Column = "PileFeature" TypeName = "System.Int32" />
        <Param Name = "@WaterSupplyPipeCount" Column = "WaterSupplyPipeCount" TypeName = "System.Int32" />
        <Param Name = "@GasPipeCount" Column = "GasPipeCount" TypeName = "System.Int32" />
        <Param Name = "@ElectricPowerCount" Column = "ElectricPowerCount" TypeName = "System.Int32" />
        <Param Name = "@CommsCableCount" Column = "CommsCableCount" TypeName = "System.Int32" />
        <Param Name = "@Images" Column = "Images" TypeName = "System.String" />
        <Param Name = "@LeaderCode" Column = "LeaderCode" TypeName = "System.String" />
        <Param Name = "@CreateUser" Column = "CreateUser" TypeName = "System.String" />
        <Param Name = "@CreateTime" Column = "CreateTime" TypeName = "System.DateTime" />
        <Param Name = "@LastModifiedUser" Column = "LastModifiedUser" TypeName = "System.String" />
        <Param Name = "@LastModifiedTime" Column = "LastModifiedTime" TypeName = "System.DateTime" />
      </SqlString>
    </Sql>
    <Sql Name="UpdateObject">
      <SqlString>
        <String>
          <![CDATA[
              UPDATE  BridgeInfo 
 SET RoadID = @RoadID 
 ,BridgeName = @BridgeName 
 ,BridgeStructureStyle = @BridgeStructureStyle 
 ,InteractionAngle = @InteractionAngle 
 ,BridgeSpanCount = @BridgeSpanCount 
 ,BridgeSpanStyle = @BridgeSpanStyle 
 ,BridgeSquare = @BridgeSquare 
 ,BridgeLength = @BridgeLength 
 ,BridgeWidth = @BridgeWidth 
 ,DriveWayWidth = @DriveWayWidth 
 ,PavementWidth = @PavementWidth 
 ,MainBeamSize = @MainBeamSize 
 ,MainBeamCount = @MainBeamCount 
 ,BearingStyle = @BearingStyle 
 ,BridgeRoadStructure = @BridgeRoadStructure 
 ,ExpansionStyle = @ExpansionStyle 
 ,ExpansionCount = @ExpansionCount 
 ,MainBridgeLongitudinalSlope = @MainBridgeLongitudinalSlope 
 ,MainBridgeCrossSlope = @MainBridgeCrossSlope 
 ,RailLength = @RailLength 
 ,RailStructure = @RailStructure 
 ,BankRevetmentStyle = @BankRevetmentStyle 
 ,CappingSize = @CappingSize 
 ,PileFeature = @PileFeature 
 ,WaterSupplyPipeCount = @WaterSupplyPipeCount 
 ,GasPipeCount = @GasPipeCount 
 ,ElectricPowerCount = @ElectricPowerCount 
 ,CommsCableCount = @CommsCableCount 
 ,Images = @Images 
 ,LeaderCode = @LeaderCode 
 ,LastModifiedUser = @LastModifiedUser 
 ,LastModifiedTime = @LastModifiedTime 
  
 WHERE ID = @ID ;
]]>
        </String>
        <Param Name = "@ID" Column = "ID" TypeName = "System.Int32" />
        <Param Name = "@RoadID" Column = "RoadID" TypeName = "System.Int32" />
        <Param Name = "@BridgeName" Column = "BridgeName" TypeName = "System.String" />
        <Param Name = "@BridgeStructureStyle" Column = "BridgeStructureStyle" TypeName = "System.String" />
        <Param Name = "@InteractionAngle" Column = "InteractionAngle" TypeName = "System.String" />
        <Param Name = "@BridgeSpanCount" Column = "BridgeSpanCount" TypeName = "System.String" />
        <Param Name = "@BridgeSpanStyle" Column = "BridgeSpanStyle" TypeName = "System.String" />
        <Param Name = "@BridgeSquare" Column = "BridgeSquare" TypeName = "System.Int32" />
        <Param Name = "@BridgeLength" Column = "BridgeLength" TypeName = "System.Int32" />
        <Param Name = "@BridgeWidth" Column = "BridgeWidth" TypeName = "System.Int32" />
        <Param Name = "@DriveWayWidth" Column = "DriveWayWidth" TypeName = "System.Int32" />
        <Param Name = "@PavementWidth" Column = "PavementWidth" TypeName = "System.Int32" />
        <Param Name = "@MainBeamSize" Column = "MainBeamSize" TypeName = "System.Int32" />
        <Param Name = "@MainBeamCount" Column = "MainBeamCount" TypeName = "System.Int32" />
        <Param Name = "@BearingStyle" Column = "BearingStyle" TypeName = "System.String" />
        <Param Name = "@BridgeRoadStructure" Column = "BridgeRoadStructure" TypeName = "System.String" />
        <Param Name = "@ExpansionStyle" Column = "ExpansionStyle" TypeName = "System.String" />
        <Param Name = "@ExpansionCount" Column = "ExpansionCount" TypeName = "System.Int32" />
        <Param Name = "@MainBridgeLongitudinalSlope" Column = "MainBridgeLongitudinalSlope" TypeName = "System.Double" />
        <Param Name = "@MainBridgeCrossSlope" Column = "MainBridgeCrossSlope" TypeName = "System.Double" />
        <Param Name = "@RailLength" Column = "RailLength" TypeName = "System.Int32" />
        <Param Name = "@RailStructure" Column = "RailStructure" TypeName = "System.String" />
        <Param Name = "@BankRevetmentStyle" Column = "BankRevetmentStyle" TypeName = "System.String" />
        <Param Name = "@CappingSize" Column = "CappingSize" TypeName = "System.Int32" />
        <Param Name = "@PileFeature" Column = "PileFeature" TypeName = "System.Int32" />
        <Param Name = "@WaterSupplyPipeCount" Column = "WaterSupplyPipeCount" TypeName = "System.Int32" />
        <Param Name = "@GasPipeCount" Column = "GasPipeCount" TypeName = "System.Int32" />
        <Param Name = "@ElectricPowerCount" Column = "ElectricPowerCount" TypeName = "System.Int32" />
        <Param Name = "@CommsCableCount" Column = "CommsCableCount" TypeName = "System.Int32" />
        <Param Name = "@Images" Column = "Images" TypeName = "System.String" />
        <Param Name = "@LeaderCode" Column = "LeaderCode" TypeName = "System.String" />
        <Param Name = "@LastModifiedUser" Column = "LastModifiedUser" TypeName = "System.String" />
        <Param Name = "@LastModifiedTime" Column = "LastModifiedTime" TypeName = "System.DateTime" />
      </SqlString>
    </Sql>
    <Sql Name="DeleteObject">
      <SqlString>
        <String>
          <![CDATA[
              DELETE 
 FROM BridgeInfo 
 WHERE ID = @ID;
]]>
        </String>
        <Param Name = "@ID" Column = "ID" TypeName = "System.Int32" />
      </SqlString>
    </Sql>
    <Sql Name="SelectObjectByPage">
      <SqlString>
        <String>
          <![CDATA[
       select X.*,B.RoadName from(
    select * from ( 
      select row_number() over (order by A.ID  @Direction) row, 
  A.ID 
 ,A.RoadID 
 ,A.BridgeName 
 ,A.BridgeStructureStyle 
 ,A.InteractionAngle 
 ,A.BridgeSpanCount 
 ,A.BridgeSpanStyle 
 ,A.BridgeSquare 
 ,A.BridgeLength 
 ,A.BridgeWidth 
 ,A.DriveWayWidth 
 ,A.PavementWidth 
 ,A.MainBeamSize 
 ,A.MainBeamCount 
 ,A.BearingStyle 
 ,A.BridgeRoadStructure 
 ,A.ExpansionStyle 
 ,A.ExpansionCount 
 ,A.MainBridgeLongitudinalSlope 
 ,A.MainBridgeCrossSlope 
 ,A.RailLength 
 ,A.RailStructure 
 ,A.BankRevetmentStyle 
 ,A.CappingSize 
 ,A.PileFeature 
 ,A.WaterSupplyPipeCount 
 ,A.GasPipeCount 
 ,A.ElectricPowerCount 
 ,A.CommsCableCount 
 ,A.Images 
 ,A.LeaderCode 
 ,A.CreateUser 
 ,A.CreateTime 
 ,A.LastModifiedUser 
 ,A.LastModifiedTime 
  
 FROM 
 BridgeInfo A
        WHERE @Where) wx
        where row between @PageSize*@PageIndex+1 and @PageSize*(@PageIndex+1)
        )X left join RoadBasicInfo B on X.RoadID=B.ID
]]>
        </String>
        <Param Name = "@PageIndex" Column = "PageIndex" TypeName = "System.Int32" />
        <Param Name = "@PageSize" Column = "PageSize" TypeName = "System.Int32" />
        <Param Name = "@SortField" Column = "SortField" TypeName = "System.String"  Overcast="True" />
        <Param Name = "@Direction" Column = "Direction" TypeName = "System.String" Overcast="True" />
        <Param Name = "@Where" Column = "Where" TypeName = "System.String" />
      </SqlString>
    </Sql>

    <Sql Name="GetTotalCount">
      <SqlString>
        <String>
          <![CDATA[
  SELECT 
    COUNT(1) AS ICOUNT  
  FROM BridgeInfo A
  WHERE @Where ;
]]>
        </String>
        <Param Name = "@Where" Column = "Where" TypeName = "System.String" />
      </SqlString>
    </Sql>
    <Sql Name="getByRoadId">
      <SqlString>
        <String>
          <![CDATA[
      select * from BridgeInfo WHERE RoadID=@RoadID;
        ]]>
        </String>
        <Param Name = "@RoadID" Column = "RoadID" TypeName = "System.Int32" />
      </SqlString>
    </Sql>
  </Sqls>
</Entity>
